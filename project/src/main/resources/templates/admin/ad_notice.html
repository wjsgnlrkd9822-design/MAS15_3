
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³µì§€ì‚¬í•­ ì‘ì„±</title>
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f5f6f7;
        }
        .sidebar {
            width: 240px;
            background-color: #1f2933;
            color: #fff;
        }   
        .sidebar h5 {
            font-weight: 600;
        }
        .sidebar .nav-link {
            color: #cbd5e1;
            padding: 10px 14px;
            border-radius: 6px;
        }
        .sidebar .nav-link.active,
        .sidebar .nav-link:hover {
            background-color: #374151;
            color: #fff;
        }
        .header {
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
        }
    </style>
</head>

<body>
<div class="d-flex">

    <!-- ì‚¬ì´ë“œë°” (âŒ ìˆ˜ì • ì—†ìŒ) -->
    <aside class="sidebar p-4 vh-100">
        <h5 class="mb-4">ê´€ë¦¬ì í˜ì´ì§€</h5>
        <nav class="nav flex-column gap-1">
            <a class="nav-link" th:href="@{/admin}">ğŸ“Š ë§¤ì¶œ ì¡°íšŒ</a>
            <a class="nav-link" th:href="@{/admin/usermanage}">ğŸ‘¥ íšŒì› ê´€ë¦¬</a>
            <a class="nav-link" th:href="@{/admin/service}">âš™ï¸ ì„œë¹„ìŠ¤ ë° ì‹œì„¤ ê´€ë¦¬</a>
            <a class="nav-link" th:href="@{/admin/trainer}">ğŸ‡ í›ˆë ¨ì‚¬ ê´€ë¦¬</a>
            <a class="nav-link active" th:href="@{/admin/notice}">ğŸ“ ê³µì§€ì‚¬í•­</a>
            <a class="nav-link" th:href="@{/admin/petstatus}">ğŸ¾ ë°˜ë ¤ê²¬ ìƒíƒœ ê´€ë¦¬</a>
        </nav>
    </aside>

    <!-- ë©”ì¸ ì˜ì—­ -->
    <div class="flex-fill p-4">

        <h4 class="mb-4">ê³µì§€ì‚¬í•­ ì‘ì„±</h4>

    <form id="noticeForm" action="/admin/noticeadd" method="post">
       <div class="card" >
            <div class="card-body">

                <!-- ì œëª© -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">ì œëª©</label>
                    <input type="text" class="form-control" id="title" placeholder="ê³µì§€ì‚¬í•­ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>

                <!-- ë‚´ìš© -->
                <div class="mb-4">
                    <label class="form-label fw-semibold">ë‚´ìš©</label>
                    <textarea class="form-control" rows="8" id="content" placeholder="ê³µì§€ì‚¬í•­ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                </div>

                <!-- ë²„íŠ¼ ì˜ì—­ -->
                <div class="d-flex justify-content-end gap-2">
                    <a href="/noticelist" class="btn btn-secondary">ëª©ë¡ìœ¼ë¡œ</a>
                    <button type="submit" class="btn btn-primary">ë“±ë¡í•˜ê¸°</button>
                </div>

               </div>
           </div>
        </form>
    </div>
</div>
</body>
<script>
document.getElementById("noticeForm").addEventListener("submit", function (e) {
    e.preventDefault(); // â­ submit ê¸°ë³¸ ë™ì‘ ë§‰ê¸°

    const csrfToken = document.querySelector('meta[name="_csrf"]').content;
    const csrfHeader = document.querySelector('meta[name="_csrf_header"]').content;

    const data = {
        title: document.getElementById("title").value,
        content: document.getElementById("content").value
    };

    fetch("/admin/noticeadd", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            [csrfHeader]: csrfToken
        },
        body: JSON.stringify(data)
    })
    .then(function (response) {
        return response.text();   // ğŸ”¹ ì—¬ê¸°ì„œ Promise ë°˜í™˜
    })
    .then(function (result) {
        if (result === "SUCCESS") {
            alert("ê³µì§€ì‚¬í•­ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤");
            window.location.href = "/admin/notice";
        } else {
            alert("ë“±ë¡ ì‹¤íŒ¨ : " + result);
        }
    })
    .catch(function (error) {
        console.error(error);
        alert("ì„œë²„ í†µì‹  ì˜¤ë¥˜");
    });
});
</script>


</html>
