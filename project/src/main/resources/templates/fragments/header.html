<!-- 프래그먼트 : 레이아웃에서 공통적으로 사용할 UI -->
<!-- th:fragment="프래그먼트 명" -->
<th:block th:fragment="header">
    <header>
        <a th:href="@{/}">
            <img th:src="@{/img/logo.png}">
        </a>
        
        <ul>
            <li><a href="/pet/reservation">예약</a></li>
            <li><a href="/noticelist">공지사항</a></li>
            <li><a href="/service">서비스</a></li>
            <li><a href="/소개">소개</a></li>
        </ul>

        <ul>
            <!-- 비로그인 -->
            <li class="login" sec:authorize="isAnonymous()">
                <a href="/login">로그인</a>
            </li>
            <li class="login" sec:authorize="isAnonymous()">
                <a href="/join">회원가입</a>
            </li>

            <!-- 로그인 -->
             <li class="login" sec:authorize="hasRole('ADMIN')">
                <a href="/admin">관리자 페이지</a>
            </li>
            <li class="login" sec:authorize="isAuthenticated()">
                <a href="/mypage">마이페이지</a>
            </li>
            <li class="login" sec:authorize="isAuthenticated()">
                <a href="#" id="logoutLink">로그아웃</a>

                <form id="logoutForm" action="/logout" method="post" style="display:none">
                    <input type="hidden"
                        th:name="${_csrf.parameterName}"
                        th:value="${_csrf.token}">
                </form>
            </li>

            <script>
            document.addEventListener('DOMContentLoaded', () => {
                const link = document.getElementById('logoutLink');
                if (link) {
                    link.addEventListener('click', e => {
                        e.preventDefault();
                        document.getElementById('logoutForm').submit();
                    });
                }
            });
            </script>
        </ul>
    
        

    </header>

</th:block>