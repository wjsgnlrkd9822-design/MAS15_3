<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ê°ì‹¤ ë¦¬ìŠ¤íŠ¸</title>

  <th:block th:replace="~{fragments/linkreservation::link}"></th:block>
  <th:block th:replace="~{fragments/link::link}"></th:block>
  <link rel="stylesheet" th:href="@{/css/reservation.css}"/>
</head>

<body>
<div class="page-bg"></div>

<th:block th:replace="~{fragments/header::header}"></th:block>

<p class="reservation-text">Room List</p>

<!-- í•„í„° (ê¸°ì¡´ êµ¬ì¡° ìœ ì§€) -->
<div class="top-bar">
  <!-- í•„í„° ì˜ì—­ -->
<div class="filter-section">
  <form th:action="@{/pet/reservation}" method="get" class="filter-form">

    <!-- ê°€ê²© ì •ë ¬ -->
    <div class="filter-group">
      <div class="filter-label">ê°€ê²©</div>
      <div class="chip-container">
        <label class="filter-chip">
          <input type="radio" name="sort" value="default" th:checked="${selectedSort=='default'}">
          <span>ê¸°ë³¸</span>
        </label>
        <label class="filter-chip">
          <input type="radio" name="sort" value="priceAsc" th:checked="${selectedSort=='priceAsc'}">
          <span>ì €ë ´</span>
        </label>
        <label class="filter-chip">
          <input type="radio" name="sort" value="priceDesc" th:checked="${selectedSort=='priceDesc'}">
          <span>ë¹„ìŒˆ</span>
        </label>
      </div>
    </div>

    <!-- ê²¬ì¢… -->
    <div class="filter-group">
      <div class="filter-label">ê²¬ì¢…</div>
      <div class="chip-container">
        <label class="filter-chip">
          <input type="radio" name="sizeType" value="all" th:checked="${selectedSizeType=='all'}">
          <span>ì „ì²´</span>
        </label>
        <label class="filter-chip">
          <input type="radio" name="sizeType" value="ì†Œí˜•ê²¬" th:checked="${selectedSizeType=='ì†Œí˜•ê²¬'}">
          <span>ì†Œí˜•ê²¬</span>
        </label>
        <label class="filter-chip">
          <input type="radio" name="sizeType" value="ì¤‘í˜•ê²¬" th:checked="${selectedSizeType=='ì¤‘í˜•ê²¬'}">
          <span>ì¤‘í˜•ê²¬</span>
        </label>
        <label class="filter-chip">
          <input type="radio" name="sizeType" value="ëŒ€í˜•ê²¬" th:checked="${selectedSizeType=='ëŒ€í˜•ê²¬'}">
          <span>ëŒ€í˜•ê²¬</span>
        </label>
      </div>
    </div>

    <!-- ì˜ˆì•½ ìƒíƒœ -->
    <div class="filter-group">
      <div class="filter-label">ìƒíƒœ</div>
      <div class="chip-container">
        <label class="filter-chip">
          <input type="radio" name="status" value="all" th:checked="${selectedStatus=='all'}">
          <span>ì „ì²´</span>
        </label>
        <label class="filter-chip">
          <input type="radio" name="status" value="ì˜ˆì•½ê°€ëŠ¥" th:checked="${selectedStatus=='ì˜ˆì•½ê°€ëŠ¥'}">
          <span>ê°€ëŠ¥</span>
        </label>
        <label class="filter-chip">
          <input type="radio" name="status" value="ì˜ˆì•½ë¶ˆê°€" th:checked="${selectedStatus=='ì˜ˆì•½ë¶ˆê°€'}">
          <span>ë¶ˆê°€</span>
        </label>
      </div>
    </div>

    <!-- ì ìš© ë²„íŠ¼ -->
    <button type="submit" class="reserve-btn">ì ìš©</button>

  </form>
</div>

</div>

<!-- ğŸ”¥ CSSê°€ ìš”êµ¬í•˜ëŠ” ê·¸ë¦¬ë“œ êµ¬ì¡° -->
<div class="container">
  <div class="room-grid">

    <a th:each="room : ${rooms}"
       th:href="@{'/pet/reservation/' + ${room.roomNo}}"
       class="reservation-card-link">

      <div class="reservation-card"
           th:classappend="${room.active=='ì˜ˆì•½ë¶ˆê°€'} ? ' disabled' : ''">

        <!-- ì´ë¯¸ì§€ ì˜ì—­ -->
        <div class="card-image-wrapper">
          <img th:src="@{'/uploads/' + ${room.img}}" class="room-image"/>

          <div class="status-badge"
               th:classappend="${room.active=='ì˜ˆì•½ê°€ëŠ¥'} ? ' available' : ' booked'"
               th:text="${room.active}">
          </div>
        </div>

        <!-- ë‚´ìš© ì˜ì—­ -->
        <div class="card-content">

          <div class="card-header-row">
            <p class="room-type" th:text="${room.roomType}"></p>
          </div>

          <p class="room-desc" th:text="${room.etc}"></p>

          <div class="card-footer-row">
            <div class="price-box">
              <span class="price-label">1ë°•</span>
              <span class="room-price">
                <span th:text="${#numbers.formatInteger(room.roomPrice,3,'COMMA')}"></span>
                <span class="currency">ì›</span>
              </span>
            </div>

            <span class="reserve-btn">ì˜ˆì•½í•˜ê¸°</span>
          </div>

        </div>
      </div>
    </a>

  </div>
</div>

<th:block th:replace="~{fragments/footer::footer}"></th:block>

<script>
  document.querySelectorAll(".reservation-card-link").forEach(link => {
    link.addEventListener("click", e => {
      const status = link.querySelector(".status-badge").textContent.trim();
      if (status === "ì˜ˆì•½ë¶ˆê°€") {
        e.preventDefault();
        alert("ì´ë¯¸ ì˜ˆì•½ëœ ê°ì‹¤ì…ë‹ˆë‹¤.");
      }
    });
  });
</script>

</body>
</html>
